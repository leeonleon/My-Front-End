# 《JavaScript高级程序设计》笔记

#### 引用类型
> 是一种数据结构，用于将数据和功能组织在一起，也被称为**类**。

#### 1.Array类型
`length`属性不是只读的，可以用过`length`从数组末尾移除项或添加新项。

1.1 检测数组

* `Array.isArray(value)`：用于检测`value`值是否是数组类型。*（ECMAScript 5新增）*

1.2 转换方法

* `toString()`：返回数组每个值的字符串形式并且以逗号分隔的字符串，调用每一项的`toString()`方法。
* `valueOf()`：返回原数组，和直接使用`console.log()`输出结果相同。
* `toLocaleString()`：和`toString()`相似，但调用的是每一项的`toLocaleString()`方法。
* `join()`：接收一个参数作为每一项的分隔符，返回包含所有数组项的字符串。

1.3 栈方法
> 栈是一种LIFO(Last-In-First-Out，**后进先出**)的数据结构。栈中项的插入（**推入**）和移除（**弹出**），只发生在一个位置——栈的顶部。

* `push()`：接收任意个参数，添加到数组末尾，返回修改后数组的长度。
* `pop()`：从数组末尾移除最后一项，返回移除的项。

1.4 队列方法
> FIFO(First-In-First-Out，**先进先出**)。队列在列表的末端添加项，从列表的前端移除项。

* `shift()`：移除数组中的第一个项并返回该项，同时数组长度减1。
* `unshift()`：在数组前端添加任意个项并返回新数组的长度。

1.5 排序

* `reverse()`：反转数组项的顺序。
* `sort()`：调用每个数组项的`toString()`转型方法然后比较得到的字符串，但通常得到的结果不是人们想要的。因此`sort()`方法可以接收一个比较函数作为排序依据。例如：

        function compare(value1, value2) {
            if(value1 < value2) {
                return -1; //第一个参数应该位于第二个之前返回负数
            } else if(value1 > value2) {
                return 1; //第一个参数应该位于第二个之后则返回正数
            } else {
                return 0; //两个参数相等返回0
            }
        }
        var values = [0, 15, 10, 5, 1];
        values.sort(compare);
        console.log(values); //0,1,5,10,15

1.6 操作方法

* `concat()`：基于当前数组中的所有项创建一个新数组。
* `slice()`：接收一个或两个参数。
* `splice()`：最强大的数组方法。
    * 删除：可以删除任意数量的项，接收2个参数：要删除的第一项的位置和要删除的项数。
    * 插入：可以向指定位置插入任意数量的项，接收3个参数：起始位置、0（要删除的项数）和要插入的项。如果要插入多个项，可以再传入第四、第五，以至任意多个项。例如，`splice(2, 0, 'red', 'green')`会从当前数组的位置2开始插入字符串`'red'`和`'green'`。
    * 替换：向指定位置插入任意数量的项，且同时删除任意数量的项。例如`splice(2, 1, 'red', 'green')`会删除当前数组位置2的项，然后再从位置2开始插入字符串`'red'`和`'green'`。插入的项数不必与删除的项数相等。

`splice()`方法始终返回一个数组，包含从原始数组中删除的项（如果没有删除任何项，则返回一个空数组）。

1.7 位置方法*（ECMAScript 5新增）*

* `indexOf()`：接收两个参数，要查找的项和（可选的）表示查找起始位置的索引，返回要查找的项的索引值
* `lastIndexOf()`：与`indexOf()`类似，只不过该方法是从数组的末尾开始向前查找。

1.8 迭代方法*（ECMAScript 5新增）*

每个方法都接收两个参数：要在每一项上运行的函数和（可选的）运行该函数的作用域对象——影响`this`的值。传入这些方法中的函数会接收三个参数：数组项的值、该项在数组中的位置和数组对象本身。

* `every()`：对数组中的每一项运行给定函数，如果该函数对每一项都返回`true`，则返回`true`;
* `filter()`：对数组中的每一项运行给定函数，返回该函数会返回`true`的项组成的数组。
* `forEach()`：对数组中的每一项运行给定函数。这个方法没有返回值。
* `map()`：对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组。
* `some()`：对数组中的每一项运行给定函数，如果该函数对任一项返回`true`，则返回`true`。

1.9 归并方法*（ECMAScript 5新增）*

* `reduce()`：迭代数组的所有项，然后构建一个最终返回的值。接收2个参数：一个在每一项上调用的函数和（可选的）作为归并基础的初始值。所传入的函数接收4个参数：前一个值、当前值、项的索引和数组对象。
* `reduceRight()`：与`reduce()`类似，只不过该方法是从数组的最后一项开始，向前遍历到第一项。

#### 2.Date类型

* `Date.parse()`：接收一个表示日期的字符串参数，然后尝试根据这个字符串返回相应日期的毫秒数。如果字符串不能表示日期，会返回`NaN`。
`var someDate = new Date(Date.parse('May 25, 2004'));`等价于：
`var someDate = new Date('May 25, 2004');`，这个写法会在后台调用`Date.parse()`。
* `Date.UTC()`：同样也返回表示日期的毫秒数，不同的是接收参数不同，分别为年份、基于0的月份（一月是0，二月是1，以此类推）、月中的哪一天（1到31）、小时数（0到23）、分钟、秒以及毫秒数。其中前两个参数（年和月）是必需的，如果没有提供月中的天数，则假设为1；如果省略其他参数，则统统假设为0。
`Date.UTC()`的参数也可以直接传给`Date`构造函数，但是这样的话日期和时间都基于本地时区而非GMT来创建。例如：
`var y2k = new Date(Date.UTC(2000, 0));`//GMT时间20000年1月1日午夜零时
由于我是在东八区时区，所以输出`y2k`的结果为`Sat Jan 01 2000 08:00:00 GMT+0800 (中国标准时间)`
而`var y2k = new Date(2000, 0);`//本地时间2000年1月1日午夜零时。输出`y2k`的结果为`Sat Jan 01 2000 00:00:00 GMT+0800 (中国标准时间)`。
* `Date.now()`*ECMAScript5新增*返回表示调用这个方法时的日期和时间的毫秒数。
支持此方法的浏览器包括*IE9+、Firefox 3+、Safari 3+、Opera 10.5和Chrome*
在不支持的其他浏览器使用`+`操作符获取Date对象的时间戳，也可以达到同样的目的。
`var n = +new Date();`等同于`var n = Date.now();`

2.1 继承的方法

* `toString()`：与直接打印输出Date实例结果相同。
* `toLocaleString()`：按照与浏览器设置的地区相适应的格式返回日期的时间。这大致意味着时间格式中会包含AM或PM，但不会包含时区信息（具体格式会因浏览器而异）。
* `valueOf()`：返回日期的毫秒表示。可以直接用比较操作符来比较日期值（Date实例）。

2.2 日期格式化方法

2.3 日期/时间组件方法
